(function(t){function e(e){for(var n,o,r=e[0],c=e[1],u=e[2],l=0,p=[];l<r.length;l++)o=r[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);m&&m(e);while(p.length)p.shift()();return i.push.apply(i,u||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],n=!0,r=1;r<s.length;r++){var c=s[r];0!==a[c]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var n={},a={app:0},i=[];function o(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=n,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(s,n,function(e){return t[e]}.bind(null,n));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var m=c;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},2446:function(t,e,s){"use strict";s("72c6")},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("router-view")],1)},i=[],o={name:"App"},r=o,c=s("2877"),u=s("6544"),m=s.n(u),l=s("7496"),p=Object(c["a"])(r,a,i,!1,null,null,null),f=p.exports;m()(p,{VApp:l["a"]});var h=s("8c4f"),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-main",[s("v-container",{attrs:{fluid:"","fill-height":""}},[s("v-layout",{attrs:{"align-center":"","justify-center":""}},[s("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[s("v-card",{staticClass:"elevation-12"},[s("v-toolbar",{attrs:{dark:"",color:"#17a2b8"}},[s("v-toolbar-title",[t._v("Chat app")])],1),s("v-card-text",[s("v-form",[s("v-text-field",{attrs:{label:"Username",type:"text"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),s("v-select",{attrs:{items:t.rooms,label:"Room"},scopedSlots:t._u([{key:"item",fn:function(e){return[t._v(" "+t._s(e.item)+" ("+t._s(t.roomsCounters[e.item])+") ")]}}]),model:{value:t.room,callback:function(e){t.room=e},expression:"room"}})],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"white--text",attrs:{color:"#17a2b8"},on:{click:t.joinRoom}},[t._v("Join chat")])],1)],1),t.error?s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" "+t._s(t.error)+" ")]):t._e()],1)],1)],1)],1),s("div",{staticClass:"bg-light py-4"},[s("div",{staticClass:"container text-center"},[s("p",{staticClass:"text-muted mb-0 py-2"},[t._v("Yaki "+t._s(t.year))])])])],1)},g=[],d=(s("caad"),s("2532"),s("b64b"),s("159b"),{name:"Home",data:function(){return{username:"",room:"",rooms:[],roomsCounters:{},maxParticipantsEachRoom:0,year:0,error:""}},methods:{joinRoom:function(){var t=this;return this.username?this.room?this.username.toLowerCase().includes("admin")?this.error="Username must not contain 'admin'":this.roomsCounters[this.room]>=this.maxParticipantsEachRoom?this.error="This room is full, max participants: ".concat(this.maxParticipantsEachRoom):void this.$socket.emit("joinRoom",this.username,this.room,(function(e){if(e)return t.error=e;t.$router.push({name:"Room",params:{username:t.username,room:t.room}})})):this.error="Room is empty":this.error="Username is empty"},getRoomsCounters:function(){var t=this;this.$socket.emit("getRoomsCounters",(function(e){var s=e.counters,n=e.maxParticipantsEachRoom;t.rooms=Object.keys(s),t.maxParticipantsEachRoom=n,t.setRoomsCounters(s)}))},onRoomsCounters:function(){var t=this;this.$socket.on("roomsCounters",(function(e){var s=e.counters;t.setRoomsCounters(s)}))},setRoomsCounters:function(t){var e=this;Object.keys(t).forEach((function(s){t[s]>=e.maxParticipantsEachRoom&&(t[s]="Full")})),this.roomsCounters=t}},created:function(){this.year=(new Date).getFullYear(),this.getRoomsCounters(),this.onRoomsCounters()}}),b=d,_=s("8336"),y=s("b0af"),C=s("99d9"),x=s("a523"),R=s("0e8f"),k=s("4bd4"),w=s("a722"),P=s("f6c4"),$=s("b974"),T=s("2fa4"),j=s("8654"),O=s("71d9"),S=s("2a7f"),V=Object(c["a"])(b,v,g,!1,null,null,null),E=V.exports;m()(V,{VApp:l["a"],VBtn:_["a"],VCard:y["a"],VCardActions:C["a"],VCardText:C["b"],VContainer:x["a"],VFlex:R["a"],VForm:k["a"],VLayout:w["a"],VMain:P["a"],VSelect:$["a"],VSpacer:T["a"],VTextField:j["a"],VToolbar:O["a"],VToolbarTitle:S["a"]});var M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("span",{staticClass:"text-info text-left h3"},[t._v("Room: "+t._s(t.room))]),s("button",{staticClass:"btn btn-outline-info pull-right",attrs:{type:"button"},on:{click:function(e){return t.leave()}}},[t._v("Leave")]),s("div",{staticClass:"messaging"},[s("div",{staticClass:"inbox_msg"},[s("div",{staticClass:"inbox_people"},[s("div",{staticClass:"headind_srch"},[s("div",{staticClass:"recent_heading"}),s("div",{staticClass:"srch_bar"},[s("div",{staticClass:"stylish-input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputSearch,expression:"inputSearch"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search participants"},domProps:{value:t.inputSearch},on:{input:function(e){e.target.composing||(t.inputSearch=e.target.value)}}})])])]),s("div",{staticClass:"inbox_chat"},t._l(t.filterParticipants,(function(e,n){return s("div",{key:n,staticClass:"chat_list"},[s("div",{staticClass:"chat_people"},[s("div",{staticClass:"chat_ib"},[s("span",{class:t.username===e?"text-info":null},[t._v(t._s(e))]),t.username!==e?s("span",{style:{color:"green"}},[t._v(t._s(t.participantsTyping[e]?" is typing...":""))]):t._e()])])])})),0)]),s("div",{staticClass:"mesgs"},[s("div",{ref:"msg_history",staticClass:"msg_history"},t._l(t.messages,(function(t,e){return s("div",{key:e},[s("message",{attrs:{msg:t}})],1)})),0),s("div",{staticClass:"type_msg"},[s("div",{staticClass:"input_msg_write"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],ref:"inputType",staticClass:"form-control",attrs:{type:"text",placeholder:"Type a message"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),s("button",{staticClass:"msg_send_btn",attrs:{type:"button"},on:{click:function(e){return t.send()}}},[s("i",{staticClass:"fa fa-paper-plane-o",attrs:{"aria-hidden":"true"}})])])])])])])])},A=[],L=(s("4de4"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.msg.isIncomingMsg?s("div",{staticClass:"incoming_msg"},[s("div",{staticClass:"incoming_msg_img",style:"Admin"===t.msg.by?{color:"red"}:null},[t._v(t._s(t.msg.by))]),s("div",{staticClass:"received_msg"},[s("div",{staticClass:"received_withd_msg"},[s("p",[t._v(t._s(t.msg.content))]),s("span",{staticClass:"time"},[t._v(t._s(t.msg.time))])])])]):s("div",{staticClass:"outgoing_msg"},[s("div",{staticClass:"sent_msg"},[s("p",[t._v(t._s(t.msg.content))]),s("span",{staticClass:"time"},[t._v(t._s(t.msg.time))])])]),s("br")])}),U=[],F=(s("fb6a"),{name:"Message",props:["msg"],created:function(){this.msg.time=(new Date).toLocaleTimeString().slice(0,5)}}),D=F,H=(s("2446"),Object(c["a"])(D,L,U,!1,null,"ca19f380",null)),J=H.exports,I={name:"Room",components:{Message:J},data:function(){return{username:"",room:"",participants:[],participantsTyping:{},inputSearch:"",message:"",messages:[]}},created:function(){this.$socket.removeAllListeners(),this.setUserDetails(),this.getRoomParticipants(),this.onRoomParticipants(),this.onMessage(),this.getParticipantsTyping(),this.onTyping(),this.welcomeMe()},computed:{filterParticipants:function(){var t=this;return this.participants.filter((function(e){return e.toLowerCase().includes(t.inputSearch.toLowerCase())}))}},methods:{getParticipantsTyping:function(){var t=this;this.$socket.emit("getParticipantsTyping",(function(e){t.participantsTyping=e}))},onTyping:function(){var t=this;this.$socket.on("typing",(function(e){t.participantsTyping=e,t.$forceUpdate()}))},welcomeMe:function(){this.messages.push({isIncomingMsg:!0,by:"Admin",content:"Welcome ".concat(this.username)})},onMessage:function(){var t=this;this.$socket.on("message",(function(e){t.messages.push(e)}))},getRoomParticipants:function(){var t=this;this.$socket.emit("getRoomParticipants",(function(e){t.participants=e}))},onRoomParticipants:function(){var t=this;this.$socket.on("roomParticipants",(function(e){t.participants=e}))},send:function(){var t=this;this.$socket.emit("message",this.message,(function(){t.messages.push({by:t.username,content:t.message}),t.message="",t.$refs.inputType.focus()}))},leave:function(){this.$router.push("/")},setUserDetails:function(){this.username=this.$route.params.username,this.room=this.$route.params.room}},watch:{messages:function(){this.$nextTick((function(){var t=this.messages[this.messages.length-1]||{};if(t.by===this.username){var e=this.$refs.msg_history;e.scrollTop=e.scrollHeight}}))},message:function(){this.$socket.emit("typing",!!this.message)}}},N=I,Y=(s("bb77"),Object(c["a"])(N,M,A,!1,null,"174264ba",null)),B=Y.exports,W=s("8e27"),q=s.n(W),z=q()();n["a"].use(h["a"]);var G=[{path:"/",name:"Home",component:E,beforeEnter:function(t,e,s){z.emit("leaveRoom"),s()}},{path:"/room",name:"Room",component:B,beforeEnter:function(t,e,s){z.emit("exists",(function(t){if(t)return s();s("/")}))}}],K=new h["a"]({mode:"history",base:"/",routes:G}),Q=K,X=s("f309");n["a"].use(X["a"]);var Z=new X["a"]({});n["a"].config.productionTip=!1,n["a"].prototype.$socket=z,new n["a"]({router:Q,vuetify:Z,render:function(t){return t(f)}}).$mount("#app")},"72c6":function(t,e,s){},8015:function(t,e,s){},bb77:function(t,e,s){"use strict";s("8015")}});
//# sourceMappingURL=app.18664f83.js.map